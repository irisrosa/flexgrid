import { Meta, Story, Canvas, ArgsTable, Source } from '@storybook/addon-docs/blocks';
import dedent from 'ts-dedent';
import { FlexGrid, Block, BlockSet } from '@src';
import { data } from './data';

<Meta
  title="FlexGrid"
  component={FlexGrid}
  subcomponents={{
    Block,
    BlockSet,
  }}
  args={{
    data,
  }}
/>

export const Template = args => {
  return (
    <>
      <FlexGrid {...args} />
    </>
  );
};

# FlexGrid

The FlexGrid component renders groups of blocks (called `BlockSet`), positioning them accordingly to their options.

<Story name="Default">{Template.bind({})}</Story>

Example data that will generate a FlexGrid:

<Source dark language="javascript" code={dedent`${JSON.stringify(data, null, 2)}`} />
<Source
  dark
  language="jsx"
  code={dedent`
  <FlexGrid data={data} />
`}
/>

---

<ArgsTable of={FlexGrid} />

---

## Manual FlexGrid

It's also possible to build a FlexGrid combining `BlockSet` and `Block` components directly.

<Canvas>
  <Story name="Manual FlexGrid">
    <BlockSet>
      <Block>
        <p>
          Ut occaecat ut sunt veniam laborum quis velit pariatur ullamco esse duis velit aliquip. Do
          est aliqua et non. Nisi occaecat magna pariatur nulla aute mollit commodo dolor velit
          irure elit.
        </p>
        <button onClick={() => null}>Click me</button>
      </Block>
      <Block>
        <p>
          Ut occaecat ut sunt veniam laborum quis velit pariatur ullamco esse duis velit aliquip. Do
          est aliqua et non. Nisi occaecat magna pariatur nulla aute mollit commodo dolor velit
          irure elit.
        </p>
        <button onClick={() => null}>Click me</button>
      </Block>
      <Block>
        <p>
          Ut occaecat ut sunt veniam laborum quis velit pariatur ullamco esse duis velit aliquip. Do
          est aliqua et non. Nisi occaecat magna pariatur nulla aute mollit commodo dolor velit
          irure elit.
        </p>
        <button onClick={() => null}>Click me</butt>
      </Block>
      <Block>
        <p>
          Ut occaecat ut sunt veniam laborum quis velit pariatur ullamco esse duis velit aliquip. Do
          est aliqua et non. Nisi occaecat magna pariatur nulla aute mollit commodo dolor velit
          irure elit.
        </p>
        <button onClick={() => null}>Click me</button>
      </Block>
      <Block>
        <p>
          Ut occaecat ut sunt veniam laborum quis velit pariatur ullamco esse duis velit aliquip. Do
          est aliqua et non. Nisi occaecat magna pariatur nulla aute mollit commodo dolor velit
          irure elit.
        </p>
        <Button onClick={() => null}>Click me</Button>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

## BlockSet

A BlockSet is a group of blocks with the same value of `bleed`.

<Canvas>
  <Story name="BlockSet">
    <BlockSet>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

A BlockSet with `bleedContent: true` will expand to the max width of its container or the viewport width, while the default `bleedContent: false` wraps its children in a container.

<Canvas>
  <Story name="BlockSet bleedContent">
    <BlockSet bleedContent>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

A BlockSet with `blockPadding: false` will remove the padding from the child `Block`.

<Canvas>
  <Story name="BlockSet no blockPadding">
    <BlockSet blockPadding={false}>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

### BlockSet Background

It's possible to set a background image covering the blockset.

<Canvas>
  <Story name="BlockSet with background image">
    <BlockSet
      bleedBackground
      backgroundImage={{
        src:
          'https://images.unsplash.com/photo-1600942956976-f5a7a7cd8ff7?crop=entropy&fm=jpg&h=900&q=80&w=1600&cs=tinysrgb&fit=crop',
        alt: 'Alt text',
      }}
    >
      <Block noBackground>
        <p>Block</p>
      </Block>
      <Block noBackground>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

<Canvas>
  <Story name="Blockset with custom background Component">
    <BlockSet
      blockSetStyle="dark"
      bleedBackground
      BgComp={({ children, ...props }) => (
        <>
          <img style={{ position: 'absolute' }} alt={props.alt} src={props.src} />
          {children}
        </>
      )}
      backgroundImage={{
        src:
          'https://images.unsplash.com/photo-1600942956976-f5a7a7cd8ff7?crop=entropy&fm=jpg&h=900&q=80&w=1600&cs=tinysrgb&fit=crop',
        alt: 'Alt text',
      }}
    >
      <Block noBackground>
        <p>Block</p>
      </Block>
      <Block noBackground>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

## Block

By default a `Block` wrapped by a `BlockSet` will adapt its width to be in the same row as its sibilings - up to 4 Blocks in the same row.

A block with `fullScreen: true` will expand to the limits of its `BlockSet`.

<Canvas>
  <Story name="Block fullWidth">
    <BlockSet>
      <Block fullWidth>
        <p>Block 100%</p>
      </Block>
      <Block>
        <p>Block 50%</p>
      </Block>
      <Block>
        <p>Block 50%</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

### No Padding

Blocks can receive a prop `noPadding` that will remove its default padding around any children.

<Canvas>
  <Story name="Block no padding">
    <BlockSet>
      <Block noPadding>
        <p>Block no padding</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

### Block Background

It's possible to set a backgroung image to a block by passing the prop `backgroundImage`.

Also blocks can receive the a prop `noBackground` that will remove the default brand background color or image background.

<Canvas>
  <Story name="Block with background image">
    <BlockSet>
      <Block
        backgroundImage={{
          src:
            'https://images.unsplash.com/photo-1600942956976-f5a7a7cd8ff7?crop=entropy&fm=jpg&h=500&q=80&w=1600&cs=tinysrgb&fit=crop',
          alt: 'Alt Text',
        }}
      >
        <p>Block</p>
      </Block>
      <Block noBackground style={{ backgroundColor: '#CCC' }}>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

<Canvas>
  <Story name="Block with custom background Component">
    <BlockSet>
      <Block
        BgComp={({ children, ...props }) => (
          <>
            <img
              style={{ position: 'absolute', top: 0, left: 0 }}
              alt={props.alt}
              src={props.src}
            />
            {children}
          </>
        )}
        backgroundImage={{
          src:
            'https://images.unsplash.com/photo-1600942956976-f5a7a7cd8ff7?crop=entropy&fm=jpg&h=500&q=80&w=1600&cs=tinysrgb&fit=crop',
          alt: 'Alt Text',
        }}
      >
        <p>Block</p>
      </Block>
      <Block noBackground style={{ backgroundColor: '#CCC' }}>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
      <Block>
        <p>Block</p>
      </Block>
    </BlockSet>
  </Story>
</Canvas>

## Equalize heights

It's possible to equalize the heights of all blocks in a blockset or flexgrid by passing `equalizeHeights` prop as `true`.

<Canvas>
  <Story name="Equalize heights">
    <BlockSet>
      <Block style={{ background: 'grey' }}>
        <div style={{ background: 'lightgrey' }}>
          <p>Long</p>
          <p>text</p>
          <p>as content</p>
        </div>
      </Block>
      <Block style={{ background: 'grey' }}>
        <div style={{ background: 'lightgrey' }}>
          <p>Shorter</p>
          <p>content</p>
        </div>
      </Block>
      <Block style={{ background: 'grey' }}>
        <div style={{ flexGrow: 1, background: 'lightgrey' }}>
          <p>Small content equalized</p>
        </div>
      </Block>
    </BlockSet>
  </Story>
</Canvas>
